-- Insérer les données dans la table Produit_has_Version
INSERT INTO Produit_has_Version (produit_id, version_id)
SELECT DISTINCT p.id, v.id
FROM TempTickets t
JOIN Produit p ON t.Produit = p.nom
JOIN Version v ON t.Version = v.nom
WHERE NOT EXISTS (
    SELECT 1 
    FROM Produit_has_Version pv 
    WHERE pv.produit_id = p.id AND pv.version_id = v.id
);

-- Insérer les données dans la table Systeme_exploitation_has_Version
INSERT INTO Systeme_exploitation_has_Version (version_id, systeme_exploitation_id)
SELECT DISTINCT v.id, se.id
FROM TempTickets t
JOIN Version v ON t.Version = v.nom
JOIN Systeme_exploitation se ON t.SystemeExploitation = se.nom
WHERE NOT EXISTS (
    SELECT 1 
    FROM Systeme_exploitation_has_Version sv 
    WHERE sv.version_id = v.id AND sv.systeme_exploitation_id = se.id
);
